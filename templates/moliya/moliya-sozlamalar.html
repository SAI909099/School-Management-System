{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>School Finance</title>
  <link rel="stylesheet" href="{% static 'css/moliy-sozlama-style.css' %}">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo">
        <img src="{% static 'img/Logo.png' %}" alt="Logo" class="logo-img">
      </div>
      <h3 class="sidebar-title">School Finance</h3>
      <nav class="menu">
        <a href="{% url 'moliya-main' %}"><img src="{% static 'icons/Asosiy-white.png' %}" alt=""> Home</a>
        <a href="#"><img src="{% static 'icons/Oâ€˜quvchi.png' %}" alt=""> Attendance</a>
        <a href="{% url 'moliya-oylik' %}"><img src="{% static 'icons/Jadval.png' %}" alt=""> Salaries</a>
        <a href="{% url 'moliya-sozlamalar' %}" class="active"><img src="{% static 'icons/sozlamalar.png' %}" alt=""> Settings</a>
      </nav>
    </aside>

    <!-- Content -->
    <main class="content">
      <!-- Topbar -->
      <div class="topbar">
        <input type="text" placeholder="Search">
        <div class="icons">
          <a href="#"><img src="{% static 'icons/Xabarlar.png' %}" alt="Bell"></a>
          <a href="#"><img src="{% static 'icons/Profil.png' %}" alt="Profile"></a>
        </div>
      </div>

      <div class="content">
        <div class="content-header">
          <h2>Settings</h2>
        </div>

        <div class="form-card">
          <!-- Single form, no nested forms -->
          <form id="settings-form" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <label for="ism">First Name</label>
            <input type="text" id="ism" name="first_name" placeholder="Enter first name" autocomplete="given-name">

            <label for="login">Username</label>
            <input type="text" id="login" name="username" placeholder="Enter username" autocomplete="username">

            <label for="parol">Password</label>
            <input type="password" id="parol" name="password" placeholder="Enter password" autocomplete="new-password">

            <label for="fileUpload">Image</label>
            <div class="file-upload">
              <input type="file" id="fileUpload" name="avatar" hidden>
              <label for="fileUpload" class="custom-btn">Choose file</label>
              <span id="file-name" class="file-name"></span>
            </div>

            <button type="submit" class="save-btn">Save</button>
          </form>
        </div>
      </div>
    </main>
  </div>

  <!-- Optional: JS to show selected file name -->
  <script>
    (function(){
      const inp = document.getElementById('fileUpload');
      const out = document.getElementById('file-name');
      if(inp && out){
        inp.addEventListener('change', () => {
          out.textContent = inp.files && inp.files[0] ? inp.files[0].name : '';
        });
      }
    })();
  </script>

  <script>window.API_BASE = '/api/billing';</script>
  <script src="{% static 'js/moliya-sozlamalar.js' %}" defer></script>

</body>
</html>
